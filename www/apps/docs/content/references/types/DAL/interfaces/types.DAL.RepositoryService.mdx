import ParameterTypes from "@site/src/components/ParameterTypes"

# RepositoryService

Data access layer (DAL) interface to implements for any repository service.
This layer helps to separate the business logic (service layer) from accessing the
ORM directly and allows to switch to another ORM without changing the business logic.

## Type parameters

<ParameterTypes parameters={[{"name":"T","type":"`object`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"TDTOs","type":"&#123; [K in DtoBasedMutationMethods]?: any &#125;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]}  sectionTitle="RepositoryService"/>

## Methods

### transaction

#### Type Parameters

<ParameterTypes parameters={[{"name":"TManager","type":"`object`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]}  sectionTitle="transaction"/>

#### Parameters

<ParameterTypes parameters={[{"name":"task","type":"(`transactionManager`: TManager) => Promise&#60;any&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"context","type":"`object`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"isolationLevel","type":"`string`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"transaction","type":"TManager","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"enableNestedTransactions","type":"`boolean`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]}]},{"name":"context.isolationLevel","type":"`string`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"context.transaction","type":"TManager","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"context.enableNestedTransactions","type":"`boolean`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]}]}  sectionTitle="transaction"/>

#### Returns

<ParameterTypes parameters={[{"name":"Promise","type":"Promise&#60;any&#62;","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"any","type":"`any`","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}]}  sectionTitle="transaction"/>

### getFreshManager

#### Type Parameters

<ParameterTypes parameters={[{"name":"TManager","type":"`object`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]}  sectionTitle="getFreshManager"/>

#### Returns

<ParameterTypes parameters={[{"name":"TManager","type":"TManager","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}  sectionTitle="getFreshManager"/>

### getActiveManager

#### Type Parameters

<ParameterTypes parameters={[{"name":"TManager","type":"`object`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]}  sectionTitle="getActiveManager"/>

#### Returns

<ParameterTypes parameters={[{"name":"TManager","type":"TManager","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}  sectionTitle="getActiveManager"/>

### serialize

#### Type Parameters

<ParameterTypes parameters={[{"name":"TOutput","type":"`object` \\| `object`[]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]}  sectionTitle="serialize"/>

#### Parameters

<ParameterTypes parameters={[{"name":"data","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"options","type":"`any`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]}]}  sectionTitle="serialize"/>

#### Returns

<ParameterTypes parameters={[{"name":"Promise","type":"Promise&#60;TOutput&#62;","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"TOutput","type":"TOutput","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}]}  sectionTitle="serialize"/>

### find

#### Parameters

<ParameterTypes parameters={[{"name":"options","type":"[FindOptions](../types/types.DAL.FindOptions.mdx)&#60;T&#62;","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"where","type":"[FilterQuery](../types/types.DAL.FilterQuery.mdx)&#60;T&#62; & [BaseFilterable](types.DAL.BaseFilterable.mdx)&#60;[FilterQuery](../types/types.DAL.FilterQuery.mdx)&#60;T&#62;&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"$and","type":"(T \\| [BaseFilterable](types.DAL.BaseFilterable.mdx)&#60;T&#62;)[]","description":"An array of filters to apply on the entity, where each item in the array is joined with an \"and\" condition.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"$or","type":"(T \\| [BaseFilterable](types.DAL.BaseFilterable.mdx)&#60;T&#62;)[]","description":"An array of filters to apply on the entity, where each item in the array is joined with an \"or\" condition.","optional":true,"defaultValue":"","expandable":false,"children":[]}]},{"name":"options","type":"[OptionsQuery](types.DAL.OptionsQuery.mdx)&#60;T, any&#62;","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"populate","type":"`string`[]","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"orderBy","type":"[Order](../../types/types.Order.mdx)&#60;T&#62; \\| [Order](../../types/types.Order.mdx)&#60;T&#62;[]","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"limit","type":"`number`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"offset","type":"`number`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"fields","type":"`string`[]","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"groupBy","type":"`string` \\| `string`[]","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"filters","type":"`boolean` \\| `string`[] \\| [Dictionary](../../types/types.Dictionary.mdx)&#60;boolean \\| [Dictionary](../../types/types.Dictionary.mdx)&#62;","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]},{"name":"context","type":"[Context](../../interfaces/types.Context.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"transactionManager","type":"TManager","description":"An instance of a transaction manager of type `TManager`, which is a typed parameter passed to the context to specify the type of the `transactionManager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"manager","type":"TManager","description":"An instance of a manager, typically an entity manager, of type `TManager`, which is a typed parameter passed to the context to specify the type of the `manager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"isolationLevel","type":"`string`","description":"A string indicating the isolation level of the context. Possible values are `READ UNCOMMITTED`, `READ COMMITTED`, `REPEATABLE READ`, or `SERIALIZABLE`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"enableNestedTransactions","type":"`boolean`","description":"A boolean value indicating whether nested transactions are enabled.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"transactionId","type":"`string`","description":"A string indicating the ID of the current transaction.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]}  sectionTitle="find"/>

#### Returns

<ParameterTypes parameters={[{"name":"Promise","type":"Promise&#60;T[]&#62;","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"T[]","type":"T[]","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"T","type":"T","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}]}]}  sectionTitle="find"/>

### findAndCount

#### Parameters

<ParameterTypes parameters={[{"name":"options","type":"[FindOptions](../types/types.DAL.FindOptions.mdx)&#60;T&#62;","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"where","type":"[FilterQuery](../types/types.DAL.FilterQuery.mdx)&#60;T&#62; & [BaseFilterable](types.DAL.BaseFilterable.mdx)&#60;[FilterQuery](../types/types.DAL.FilterQuery.mdx)&#60;T&#62;&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"$and","type":"(T \\| [BaseFilterable](types.DAL.BaseFilterable.mdx)&#60;T&#62;)[]","description":"An array of filters to apply on the entity, where each item in the array is joined with an \"and\" condition.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"$or","type":"(T \\| [BaseFilterable](types.DAL.BaseFilterable.mdx)&#60;T&#62;)[]","description":"An array of filters to apply on the entity, where each item in the array is joined with an \"or\" condition.","optional":true,"defaultValue":"","expandable":false,"children":[]}]},{"name":"options","type":"[OptionsQuery](types.DAL.OptionsQuery.mdx)&#60;T, any&#62;","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"populate","type":"`string`[]","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"orderBy","type":"[Order](../../types/types.Order.mdx)&#60;T&#62; \\| [Order](../../types/types.Order.mdx)&#60;T&#62;[]","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"limit","type":"`number`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"offset","type":"`number`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"fields","type":"`string`[]","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"groupBy","type":"`string` \\| `string`[]","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"filters","type":"`boolean` \\| `string`[] \\| [Dictionary](../../types/types.Dictionary.mdx)&#60;boolean \\| [Dictionary](../../types/types.Dictionary.mdx)&#62;","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]},{"name":"context","type":"[Context](../../interfaces/types.Context.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"transactionManager","type":"TManager","description":"An instance of a transaction manager of type `TManager`, which is a typed parameter passed to the context to specify the type of the `transactionManager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"manager","type":"TManager","description":"An instance of a manager, typically an entity manager, of type `TManager`, which is a typed parameter passed to the context to specify the type of the `manager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"isolationLevel","type":"`string`","description":"A string indicating the isolation level of the context. Possible values are `READ UNCOMMITTED`, `READ COMMITTED`, `REPEATABLE READ`, or `SERIALIZABLE`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"enableNestedTransactions","type":"`boolean`","description":"A boolean value indicating whether nested transactions are enabled.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"transactionId","type":"`string`","description":"A string indicating the ID of the current transaction.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]}  sectionTitle="findAndCount"/>

#### Returns

<ParameterTypes parameters={[{"name":"Promise","type":"Promise&#60;[T[], number]&#62;","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"T[]","type":"T[]","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]},{"name":"number","type":"`number`","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}]}  sectionTitle="findAndCount"/>

### create

#### Parameters

<ParameterTypes parameters={[{"name":"data","type":"TDTOs[`\"create\"`][]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"context","type":"[Context](../../interfaces/types.Context.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"transactionManager","type":"TManager","description":"An instance of a transaction manager of type `TManager`, which is a typed parameter passed to the context to specify the type of the `transactionManager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"manager","type":"TManager","description":"An instance of a manager, typically an entity manager, of type `TManager`, which is a typed parameter passed to the context to specify the type of the `manager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"isolationLevel","type":"`string`","description":"A string indicating the isolation level of the context. Possible values are `READ UNCOMMITTED`, `READ COMMITTED`, `REPEATABLE READ`, or `SERIALIZABLE`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"enableNestedTransactions","type":"`boolean`","description":"A boolean value indicating whether nested transactions are enabled.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"transactionId","type":"`string`","description":"A string indicating the ID of the current transaction.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]}  sectionTitle="create"/>

#### Returns

<ParameterTypes parameters={[{"name":"Promise","type":"Promise&#60;T[]&#62;","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"T[]","type":"T[]","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"T","type":"T","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}]}]}  sectionTitle="create"/>

### update

#### Parameters

<ParameterTypes parameters={[{"name":"data","type":"TDTOs[`\"update\"`][]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"context","type":"[Context](../../interfaces/types.Context.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"transactionManager","type":"TManager","description":"An instance of a transaction manager of type `TManager`, which is a typed parameter passed to the context to specify the type of the `transactionManager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"manager","type":"TManager","description":"An instance of a manager, typically an entity manager, of type `TManager`, which is a typed parameter passed to the context to specify the type of the `manager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"isolationLevel","type":"`string`","description":"A string indicating the isolation level of the context. Possible values are `READ UNCOMMITTED`, `READ COMMITTED`, `REPEATABLE READ`, or `SERIALIZABLE`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"enableNestedTransactions","type":"`boolean`","description":"A boolean value indicating whether nested transactions are enabled.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"transactionId","type":"`string`","description":"A string indicating the ID of the current transaction.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]}  sectionTitle="update"/>

#### Returns

<ParameterTypes parameters={[{"name":"Promise","type":"Promise&#60;T[]&#62;","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"T[]","type":"T[]","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"T","type":"T","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}]}]}  sectionTitle="update"/>

### delete

#### Parameters

<ParameterTypes parameters={[{"name":"idsOrPKs","type":"`string`[] \\| `object`[]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"context","type":"[Context](../../interfaces/types.Context.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"transactionManager","type":"TManager","description":"An instance of a transaction manager of type `TManager`, which is a typed parameter passed to the context to specify the type of the `transactionManager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"manager","type":"TManager","description":"An instance of a manager, typically an entity manager, of type `TManager`, which is a typed parameter passed to the context to specify the type of the `manager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"isolationLevel","type":"`string`","description":"A string indicating the isolation level of the context. Possible values are `READ UNCOMMITTED`, `READ COMMITTED`, `REPEATABLE READ`, or `SERIALIZABLE`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"enableNestedTransactions","type":"`boolean`","description":"A boolean value indicating whether nested transactions are enabled.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"transactionId","type":"`string`","description":"A string indicating the ID of the current transaction.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]}  sectionTitle="delete"/>

#### Returns

<ParameterTypes parameters={[{"name":"Promise","type":"Promise&#60;void&#62;","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}  sectionTitle="delete"/>

### softDelete

Soft delete entities and cascade to related entities if configured.

#### Parameters

<ParameterTypes parameters={[{"name":"ids","type":"`string`[]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"context","type":"[Context](../../interfaces/types.Context.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"transactionManager","type":"TManager","description":"An instance of a transaction manager of type `TManager`, which is a typed parameter passed to the context to specify the type of the `transactionManager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"manager","type":"TManager","description":"An instance of a manager, typically an entity manager, of type `TManager`, which is a typed parameter passed to the context to specify the type of the `manager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"isolationLevel","type":"`string`","description":"A string indicating the isolation level of the context. Possible values are `READ UNCOMMITTED`, `READ COMMITTED`, `REPEATABLE READ`, or `SERIALIZABLE`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"enableNestedTransactions","type":"`boolean`","description":"A boolean value indicating whether nested transactions are enabled.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"transactionId","type":"`string`","description":"A string indicating the ID of the current transaction.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]}  sectionTitle="softDelete"/>

#### Returns

<ParameterTypes parameters={[{"name":"Promise","type":"Promise&#60;[T[], Record&#60;string, unknown[]&#62;]&#62;","optional":false,"defaultValue":"","description":"[T[], Record&#60;string, string[]&#62;] the second value being the map of the entity names and ids that were soft deleted","expandable":false,"children":[{"name":"T[]","type":"T[]","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]},{"name":"Record","type":"`Record<string, unknown[]>`","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}]}  sectionTitle="softDelete"/>

### restore

#### Parameters

<ParameterTypes parameters={[{"name":"ids","type":"`string`[]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"context","type":"[Context](../../interfaces/types.Context.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"transactionManager","type":"TManager","description":"An instance of a transaction manager of type `TManager`, which is a typed parameter passed to the context to specify the type of the `transactionManager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"manager","type":"TManager","description":"An instance of a manager, typically an entity manager, of type `TManager`, which is a typed parameter passed to the context to specify the type of the `manager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"isolationLevel","type":"`string`","description":"A string indicating the isolation level of the context. Possible values are `READ UNCOMMITTED`, `READ COMMITTED`, `REPEATABLE READ`, or `SERIALIZABLE`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"enableNestedTransactions","type":"`boolean`","description":"A boolean value indicating whether nested transactions are enabled.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"transactionId","type":"`string`","description":"A string indicating the ID of the current transaction.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]}  sectionTitle="restore"/>

#### Returns

<ParameterTypes parameters={[{"name":"Promise","type":"Promise&#60;[T[], Record&#60;string, unknown[]&#62;]&#62;","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"T[]","type":"T[]","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]},{"name":"Record","type":"`Record<string, unknown[]>`","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}]}  sectionTitle="restore"/>

### upsert

#### Parameters

<ParameterTypes parameters={[{"name":"data","type":"(TDTOs[`\"create\"`] \\| TDTOs[`\"update\"`])[]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"context","type":"[Context](../../interfaces/types.Context.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"transactionManager","type":"TManager","description":"An instance of a transaction manager of type `TManager`, which is a typed parameter passed to the context to specify the type of the `transactionManager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"manager","type":"TManager","description":"An instance of a manager, typically an entity manager, of type `TManager`, which is a typed parameter passed to the context to specify the type of the `manager`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"isolationLevel","type":"`string`","description":"A string indicating the isolation level of the context. Possible values are `READ UNCOMMITTED`, `READ COMMITTED`, `REPEATABLE READ`, or `SERIALIZABLE`.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"enableNestedTransactions","type":"`boolean`","description":"A boolean value indicating whether nested transactions are enabled.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"transactionId","type":"`string`","description":"A string indicating the ID of the current transaction.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]}  sectionTitle="upsert"/>

#### Returns

<ParameterTypes parameters={[{"name":"Promise","type":"Promise&#60;T[]&#62;","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"T[]","type":"T[]","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"T","type":"T","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}]}]}  sectionTitle="upsert"/>
